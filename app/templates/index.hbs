{{jukebox-onboarding-message}}

<main>
  {{#if model.wartopChunk}}
    <section class="l-container l-container--touch-full wartop-chunk">
      {{django-page page=model.wartopChunk.pagecontent}}
    </section>
  {{else if model.liveChunk}}
    <section class="l-container l-container--touch-full">
      {{django-page page=model.liveChunk.pagecontent}}
    </section>
  {{/if}}

  <section class="l-container l-container--touch-full">
    {{#stream-banner background=background streams=streams as |currentStream banner|}}
      {{#banner.header as |header|}}
        {{component header.stationTitle}}
        {{#header.dropdown as |stream|}}
          {{stream.name}}
        {{/header.dropdown}}
      {{/banner.header}}

      {{#banner.details}}
        {{#if currentStream.currentPiece}}
          <h2 class="h2">{{currentStream.currentComposer.name}}</h2>
          <h3 class="h3">{{currentStream.currentPiece}}</h3>
        {{else}}
          <h2 class="h2">{{currentStream.currentShow.showTitle}}</h2>
          {{#if currentStream.currentShow.episodeTitle}}
            <h3 class="h3">{{currentStream.currentShow.episodeTitle}}</h3>
          {{/if}}
        {{/if}}
      {{/banner.details}}

      {{#banner.controls}}
        {{#listen-button
          class='stream-banner-listenbutton nudge'
          data-action="Clicked Play/Pause Stream: stream-banner"
          data-label=currentStream.name
          type='blue-boss'
          itemPK=currentStream.slug
          itemTitle=currentStream.name}}
          Listen Live
        {{/listen-button}}
      {{/banner.controls}}

      {{#if (and currentStream.currentComposer.name currentStream.currentPiece)}}
        {{#link-to 'playlist-daily' (query-params scheduleStation=currentStream.slug) class='stream-banner-recently link--blue'}}
          Recently played
          {{nypr-svg className="icon rotate-minus90" icon="caret-down"}}
        {{/link-to}}
      {{/if}}
    {{/stream-banner}}
  </section>

  <section class="l-container l-container--touch-full gtm__click-tracking-container" data-action="Homepage">
    {{#nypr-brick-layout as |layout|}}

      {{#layout.blowout as |blowout|}}

        {{blowout.main item=model.wqxrHome.featuredItems.[0]}}

        {{#if model.membershipChunk}}
          {{#blowout.column as |column|}}
            <div class="chunk__item">
              {{django-page page=model.membershipChunk.pagecontent}}
            </div>
            {{column.brick item=model.wqxrHome.featuredItems.[1]}}
          {{/blowout.column}}
        {{else}}
          {{#blowout.column as |column|}}
            {{column.brick item=model.wqxrHome.featuredItems.[1]}}
            {{column.brick item=model.wqxrHome.featuredItems.[2]}}
          {{/blowout.column}}
        {{/if}}

      {{/layout.blowout}}

      {{#layout.cards as |row|}}
        {{#each (slice model.wqxrHome.featuredItems 3 6) as |item|}}
          {{row.brick item=item}}
        {{/each}}
      {{/layout.cards}}

      {{#if (gte model.wqxrHome.featuredItems.length 9)}}
        {{layout.blowout flip=true items=(slice model.wqxrHome.featuredItems 6 9)}}
      {{/if}}

    {{/nypr-brick-layout}}
  </section>

  {{ newsletter-signup }}

  <section class="l-container l-container--touch-full">
    {{nypr-brick-grid items=model.wqxrHome.otherItems}}
  </section>

</main>
